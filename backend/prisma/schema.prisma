generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  HOMEOWNER
  CONTRACTOR
}

model User {
  id        String              @id @default(cuid())
  email     String              @unique
  password  String
  name      String?
  role      Role                @default(HOMEOWNER)
  createdAt DateTime            @default(now())
  updatedAt DateTime            @updatedAt

  // relations
  contractorProfile ContractorProfile?
  projects          Project[]           @relation("HomeownerProjects") // ðŸ‘ˆ add this
}

model ContractorProfile {
  id          String   @id @default(cuid())
  user        User     @relation(fields: [userId], references: [id])
  userId      String   @unique
  companyName String
  description String?
  services    String   // keep as plain string (you can store JSON string here)
  logoUrl     String?
  verified    Boolean?  @default(false)
  createdAt   DateTime? @default(now())
  updatedAt   DateTime? @updatedAt
}

model Project {
  id          String   @id @default(cuid())
  homeowner   User     @relation("HomeownerProjects", fields: [homeownerId], references: [id]) // ðŸ‘ˆ match relation name
  homeownerId String
  title       String
  description String?
  projectType String
  budgetMin   Int?
  budgetMax   Int?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
